<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Blackjack Casino Admin</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <main class="container">
        <header>
            <h1>Админ-панель Blackjack Casino</h1>
            <div class="auth">
                <label for="adminId">Admin Telegram ID:</label>
                <input id="adminId" type="text" placeholder="Введите ID" autocomplete="off">
                <label for="adminPassword">Пароль:</label>
                <input id="adminPassword" type="password" placeholder="Пароль" autocomplete="off">
                <button id="connectButton">Подключиться</button>
            </div>
        </header>

        <section id="overview" class="card hidden">
            <h2>Общая статистика</h2>
            <div class="grid" id="overviewGrid"></div>
        </section>

        <section id="transactions" class="card hidden">
            <h2>Последние транзакции</h2>
            <table>
                <thead>
                    <tr>
                        <th>Время</th>
                        <th>Игрок</th>
                        <th>Сумма</th>
                        <th>Кошелек</th>
                        <th>Причина</th>
                        <th>Reference</th>
                    </tr>
                </thead>
                <tbody id="transactionsBody"></tbody>
            </table>
        </section>

        <section id="playerLookup" class="card hidden">
            <h2>Поиск игрока</h2>
            <div class="lookup-form">
                <input id="lookupTelegramId" type="text" placeholder="Telegram ID">
                <button id="lookupButton">Найти</button>
            </div>
            <div id="playerDetails" class="player-details"></div>
        </section>

        <section id="settings" class="card hidden">
            <h2>Настройки платформы</h2>
            <div class="settings-grid">
                <div class="settings-group">
                    <h3>Подкрутка</h3>
                    <label>Режим:
                        <select id="houseMode">
                            <option value="fair">Честная игра</option>
                            <option value="favor_house">В пользу казино</option>
                            <option value="favor_player">В пользу игрока</option>
                        </select>
                    </label>
                    <label>Вероятность вмешательства (%)
                        <input id="houseRigProbability" type="number" min="0" max="100" step="1">
                    </label>
                    <button id="saveSettingsButton">Сохранить</button>
                </div>
                
                <div class="settings-group">
                    <h3>Демо-счета</h3>
                    <label>
                        <input type="checkbox" id="demoEnabled"> Включить демо-счета
                    </label>
                    <label>Начальный баланс демо-счета:
                        <input id="demoDefaultBalance" type="number" min="0" step="100">
                    </label>
                    <label>Порог для пополнения:
                        <input id="demoTopUpThreshold" type="number" min="0" step="10">
                    </label>
                    <label>
                        <input type="checkbox" id="demoAllowPlayerOverrides"> Разрешить индивидуальные настройки
                    </label>
                    <button id="saveDemoSettingsButton">Сохранить демо настройки</button>
                </div>
                
                <div class="settings-group">
                    <h3>Антифрод</h3>
                    <label>
                        <input type="checkbox" id="velocityEnabled"> Проверка скорости игры
                    </label>
                    <label>Порог активности (игр в окне):
                        <input id="velocityThreshold" type="number" min="1" step="1">
                    </label>
                    <label>Окно проверки (минут):
                        <input id="velocityWindow" type="number" min="1" step="1">
                    </label>
                    <label>
                        <input type="checkbox" id="dailyCapEnabled"> Лимит дневных выигрышей
                    </label>
                    <label>Максимальная дневная прибыль:
                        <input id="dailyCapLimit" type="number" min="0" step="100">
                    </label>
                    <button id="saveAntiFraudButton">Сохранить антифрод</button>
                </div>
                
                <div class="settings-group">
                    <h3>Криптовыплаты</h3>
                    <label>Время батча (час UTC):
                        <input id="cryptoBatchHour" type="number" min="0" max="23" step="1">
                    </label>
                    <label>Дедлайн заявок (час UTC):
                        <input id="cryptoCutoffHour" type="number" min="0" max="23" step="1">
                    </label>
                    <label>Автоодобрение до суммы:
                        <input id="cryptoAutoThreshold" type="number" min="0" step="10">
                    </label>
                    <label>Ручная проверка от суммы:
                        <input id="cryptoManualThreshold" type="number" min="0" step="50">
                    </label>
                    <label>
                        <input type="checkbox" id="cryptoAllowUrgent"> Разрешить срочные выплаты
                    </label>
                    <label>Комиссия за срочность (%):
                        <input id="cryptoUrgentFee" type="number" min="0" max="10" step="0.1">
                    </label>
                    <button id="saveCryptoSettingsButton">Сохранить криптонастройки</button>
                </div>

                <div class="settings-group">
                    <h3>Комиссии (в %)</h3>
                    <table class="fees">
                        <thead>
                            <tr>
                                <th>Метод</th>
                                <th>Платформа (депозит)</th>
                                <th>Провайдер (депозит)</th>
                                <th>Платформа (вывод)</th>
                                <th>Провайдер (вывод)</th>
                            </tr>
                        </thead>
                        <tbody id="feesTable"></tbody>
                    </table>
                    <button id="saveFeesButton">Обновить комиссии</button>
                </div>
            </div>
        </section>

        <section id="withdrawals" class="card hidden">
            <h2>Выводы средств</h2>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Игрок</th>
                        <th>Метод</th>
                        <th>Сумма</th>
                        <th>Комиссии</th>
                        <th>Статус</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody id="withdrawalsBody"></tbody>
            </table>
        </section>

        <section id="playersSection" class="card hidden">
            <h2>Игроки</h2>
            <div class="players-controls">
                <button id="refreshPlayersButton">Обновить</button>
                <input id="playerSearchInput" type="text" placeholder="Поиск по Telegram ID или нику">
                <button id="searchPlayerButton">Найти</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Telegram ID</th>
                        <th>Ник</th>
                        <th>Статус</th>
                        <th>Баланс (реал)</th>
                        <th>Баланс (демо)</th>
                        <th>Уровень</th>
                        <th>Создан</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody id="playersBody"></tbody>
            </table>
        </section>

        <section id="batchesSection" class="card hidden">
            <h2>Батчи выплат</h2>
            <div class="batches-controls">
                <button id="refreshBatchesButton">Обновить</button>
                <button id="forceBatchButton">Запустить внеочередной батч</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Запланировано на</th>
                        <th>Статус</th>
                        <th>Количество выводов</th>
                        <th>Общая сумма</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody id="batchesBody"></tbody>
            </table>
        </section>

        <section id="riskSection" class="card hidden">
            <h2>События безопасности</h2>
            <div class="risk-controls">
                <button id="refreshRiskButton">Обновить</button>
                <select id="riskSeverityFilter">
                    <option value="">Все</option>
                    <option value="low">Низкая</option>
                    <option value="medium">Средняя</option>
                    <option value="high">Высокая</option>
                </select>
                <select id="riskTypeFilter">
                    <option value="">Все типы</option>
                    <option value="velocity_threshold">Скорость игры</option>
                    <option value="profit_threshold">Лимит прибыли</option>
                    <option value="win_rate_anomaly">Аномальная частота побед</option>
                </select>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Время</th>
                        <th>Игрок</th>
                        <th>Тип события</th>
                        <th>Серьезность</th>
                        <th>Детали</th>
                    </tr>
                </thead>
                <tbody id="riskBody"></tbody>
            </table>
        </section>
    </main>
    <script src="js/admin.js"></script>
</body>
</html>
